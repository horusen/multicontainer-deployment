name: Test client
on:
    push:
        branches:
            - main

variables:
    IMAGE_NAME: horusen/multi-dep-client-test

jobs:
    test:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Build docker test image
              run: docker build -t $IMAGE_NAME -f ./client/Dockerfile.dev ./client
            - name: Run docker test image
              run: docker run $IMAGE_NAME npm run test -- --coverage
